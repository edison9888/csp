<?xml version="1.0" encoding="UTF-8"?>
<collector>
	<diskfree>
		<type>command</type>
		<isConstantly>false</isConstantly>
		<cmd><![CDATA[df -h]]></cmd>
		<isFieldMode>true</isFieldMode>
		<isLineMode>false</isLineMode>
		<lines>
			<home>home</home>
			<usr>usr</usr>
		</lines>
		<resultset>
			<result>
				<name>homeuse</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>home</line>
				<field>5</field>
			</result>
			<result>
				<name>usruse</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>usr</line>
				<field>5</field>
			</result>
			<result>
				<name>home_free%</name>
				<isStore>true</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>100-homeuse</formula>
			</result>
			<result>
				<name>usr_free%</name>
				<isStore>true</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>100-usruse</formula>
			</result>
		</resultset>
	</diskfree>

	<pinglinux>
		<type>command</type>
		<isConstantly>true</isConstantly>
		<cmd>ping ${address} -i ${ivt}</cmd>
		<isFieldMode>false</isFieldMode>
		<params>
			<address>taobao.com</address>
			<ivt>5</ivt>
		</params>
		<resultset>
			<result>
				<name>time</name>
				<isStore>true</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<pattern><![CDATA[time[=|<]([\d|\.]+)\sms]]></pattern>
				<group>1</group>
				<order>0</order>
			</result>
			<result>
				<name>count</name>
				<isStore>false</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>pre.count+1</formula>
			</result>
			<result>
				<name>alltime</name>
				<isStore>false</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>pre.alltime+time</formula>
			</result>
			<result>
				<name>avg</name>
				<isStore>false</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>alltime/count</formula>
			</result>
		</resultset>
	</pinglinux>

	<cpu>
		<type>procfs</type>
		<path><![CDATA[/proc/stat]]></path>
		<isLineMode>true</isLineMode>
		<isFieldMode>true</isFieldMode>
		<lines>
			<total>0</total>
		</lines>
		<resultset>
			<result>
				<name>user</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>1</field>
			</result>

			<result>
				<name>nice</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>2</field>
			</result>

			<result>
				<name>system</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>3</field>
			</result>

			<result>
				<name>idle</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>4</field>
			</result>

			<result>
				<name>iowait</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>5</field>
			</result>

			<result>
				<name>irq</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>6</field>
			</result>

			<result>
				<name>softirq</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>7</field>
			</result>

			<result>
				<name>total</name>
				<isStore>false</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>user+nice+system+idle+iowait+irq+softirq-(pre.user+pre.nice+pre.system+pre.idle+pre.iowait+pre.irq+pre.softirq)</formula>
			</result>

			<result>
				<name>useage%</name>
				<isStore>true</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>100*(1-(idle-pre.idle)/total)</formula>
			</result>

			<result>
				<name>iowait%</name>
				<isStore>true</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>100*(iowait-pre.iowait)/total</formula>
			</result>

		</resultset>
	</cpu>


	<load>
		<type>procfs</type>
		<path><![CDATA[/proc/loadavg]]></path>
		<isLineMode>true</isLineMode>
		<isFieldMode>true</isFieldMode>
		<lines>
			<total>0</total>
		</lines>
		<resultset>
			<result>
				<name>min1</name>
				<isStore>true</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>0</field>
			</result>
		</resultset>
	</load>

	<memory>
		<type>procfs</type>
		<path><![CDATA[/proc/meminfo]]></path>
		<isLineMode>true</isLineMode>
		<isFieldMode>true</isFieldMode>
		<lines>
			<mfree>1</mfree>
			<buffers>2</buffers>
			<cache>3</cache>
			<sfree>12</sfree>
		</lines>
		<resultset>
			<result>
				<name><![CDATA[memfree]]></name>
				<isStore>true</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>mfree</line>
				<field>1</field>
			</result>
			<result>
				<name><![CDATA[buffers]]></name>
				<isStore>true</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>buffers</line>
				<field>1</field>
			</result>
			<result>
				<name><![CDATA[cache]]></name>
				<isStore>true</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>cache</line>
				<field>1</field>
			</result>
			<result>
				<name><![CDATA[swapfree]]></name>
				<isStore>true</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>sfree</line>
				<field>1</field>
			</result>
		</resultset>
	</memory>

	<diskIO>
		<type>procfs</type>
		<path><![CDATA[/proc/diskstats]]></path>
		<isLineMode>false</isLineMode>
		<isFieldMode>true</isFieldMode>
		<lines>
			<total><![CDATA[xvda |sda ]]></total>
		</lines>
		<resultset>
			<result>
				<name>quene</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>11</field>
			</result>
			<result>
				<name>iobusy</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>12</field>
			</result>
			<result>
				<name>read</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>4</field>
			</result>
			<result>
				<name>write</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>total</line>
				<field>8</field>
			</result>
			<result>
				<name>tps</name>
				<isStore>true</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>((read-pre.read)+(write-pre.write))/(SYS.TIMESTAMP-SYS.PRE.TIMESTAMP)</formula>
			</result>
			<result>
				<name>util%</name>
				<isStore>true</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>quene*100+100*(iobusy-pre.iobusy)/(SYS.TIMESTAMP-SYS.PRE.TIMESTAMP)</formula>
			</result>
		</resultset>
	</diskIO>

	<traffic>
		<type>procfs</type>
		<path><![CDATA[/proc/net/dev]]></path>
		<isLineMode>false</isLineMode>
		<isFieldMode>true</isFieldMode>
		<lines>
			<eth0><![CDATA[eth0]]></eth0>
		</lines>
		<resultset>
			<result>
				<name>inboundbyte</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>eth0</line>
				<field>2</field>
			</result>
			<result>
				<name>outboundbyte</name>
				<isStore>false</isStore>
				<isCalc>false</isCalc>
				<default>0</default>
				<line>eth0</line>
				<field>10</field>
			</result>
			<result>
				<name>inbound</name>
				<isStore>true</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>inboundbyte/(SYS.TIMESTAMP-SYS.PRE.TIMESTAMP)/1000/1024</formula>
			</result>
			<result>
				<name>outbound</name>
				<isStore>true</isStore>
				<isCalc>true</isCalc>
				<default>0</default>
				<formula>outboundbyte/(SYS.TIMESTAMP-SYS.PRE.TIMESTAMP)/1000/1024</formula>
			</result>
		</resultset>
	</traffic>

	

</collector>